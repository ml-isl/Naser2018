<div id="addTicketModal" class="modal">

    <div class="modal-content">
        <div class="modal-header">
            <span class="close">&times;</span>
            <h2>
                <i class="fa fa-plus"></i> ##word.new_ticket##
                <i ng-show="busy" class="fa fa-spinner white fa-pulse fa-fw"></i>
            </h2>
        </div>
        <div class="modal-body">


            <div class="row">

                <form class="form">

                    <div class="row border margin padding">

                        <div class="row">
                            <i-control class="col3" ng-model="customerSearch" label="##word.search##" ng-keydown="loadCustomers($event)"></i-control>
                            <i-list v="r" ng-search="client_search" class="col5" label="##word.customer_name##" items="customers" ng-model="ticket.customer" ng-change="loadCustomer()"></i-list>
                            <i-button class="col2" type="add" label="##word.ticket_new_customer##" ng-click="newCustomer()"></i-button>      
                        </div>

                        <div x-import="tickets/customer_info.html"></div>

                    </div>

                    <div class="row border margin padding">
                        <i-list class="col2" ng-search="company_search" label="##word.ticket_company##" items="company_list"  ng-model="ticket.device_info.company" ng-change="loadCategories(ticket.device_info.company)"></i-list>
                        <i-list class="col2" ng-search="category_search" label="##word.ticket_category##" items="category_list" ng-model="ticket.device_info.category" ng-change="loadSubCategories(ticket.device_info.category)"></i-list>
                        <i-list class="col2" ng-search="sub_category_search" label="##word.ticket_sub_category##" items="sub_category_list" ng-model="ticket.device_info.sub_category" ng-change="loadDevices(ticket.device_info.sub_category);loadDamages(ticket.device_info.sub_category)"></i-list>
                        <i-list class="col2" ng-search="device_search" label="##word.ticket_device##" items="device_list" ng-model="ticket.device_info.device" ng-change="loadModels(ticket.device_info.device)"></i-list>
                        <i-list class="col4" ng-search="model_search" label="##word.ticket_model##" items="models" primary="name" display2="alt" space=" - " ng-model="ticket.device_info.model" ></i-list>

                    </div>


                   <div x-import="tickets/ticket_source.html"></div>




                    <div class="row ">
                        <i-list  ng-search="damage_search" class="col4" label="##word.damage##" ng-model="ticket.damage" items="damages"></i-list>
                        <i-control class="col8" label="##word.ticket_complain##" ng-model="ticket.complain" type="text"></i-control>
                    </div>

                    <div class="row ">
                       

                        <i-date2 class="col3" ng-model="ticket.date" label="##word.ticket_date##"></i-date2>
                        <i-date2 class="col3" ng-model="ticket.visit_date" label="##word.ticket_suggest_visit_date##"></i-date2>

                       

                        <i-list class="col4" label="##word.ticket_priotry##" ng-model="ticket.priotry" items="tickets_priorities" display="ar"></i-list>

                        
                    </div>
                    <div class="row ">
                            <i-list ng-search="ticket_status" class="col3" label="##word.ticket_state##" ng-model="ticket.status" items="tickets_status" display="ar" disabled ></i-list>
                    </div>


                </form>
            </div>




        </div>
        <h2>{{error}}</h2>
        <div class="modal-footer center">
            <i-button type="add" ng-click="add()" ng-hide="busy" label="##word.add##" ></i-button>
            <i-button type="exit" onclick="site.hideModal('#addTicketModal')" ng-hide="busy" label="##word.close##" ></i-button>

        </div>
    </div>
</div>